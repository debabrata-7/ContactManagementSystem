"use strict";

function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
require("core-js/modules/es.array.join.js");
require("core-js/modules/es.reflect.construct.js");
require("core-js/modules/es.object.create.js");
require("core-js/modules/es.object.define-property.js");
require("core-js/modules/es.symbol.to-primitive.js");
require("core-js/modules/es.date.to-primitive.js");
require("core-js/modules/es.symbol.js");
require("core-js/modules/es.symbol.description.js");
require("core-js/modules/es.number.constructor.js");
require("core-js/modules/es.array.is-array.js");
require("core-js/modules/es.symbol.iterator.js");
require("core-js/modules/es.array.iterator.js");
require("core-js/modules/es.string.iterator.js");
require("core-js/modules/web.dom-collections.iterator.js");
require("core-js/modules/es.array.from.js");
require("core-js/modules/es.array.slice.js");
require("core-js/modules/es.function.name.js");
require("core-js/modules/es.weak-map.js");
require("core-js/modules/es.object.get-own-property-descriptor.js");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;
require("core-js/modules/es.array.map.js");
require("core-js/modules/es.string.starts-with.js");
require("core-js/modules/es.regexp.exec.js");
require("core-js/modules/es.string.replace.js");
require("core-js/modules/es.array.for-each.js");
require("core-js/modules/es.object.to-string.js");
require("core-js/modules/web.dom-collections.for-each.js");
require("core-js/modules/es.object.keys.js");
require("core-js/modules/es.date.to-string.js");
require("core-js/modules/es.regexp.to-string.js");
require("core-js/modules/es.array.concat.js");
require("core-js/modules/es.array.find.js");
require("core-js/modules/es.object.set-prototype-of.js");
require("core-js/modules/es.function.bind.js");
require("core-js/modules/es.object.get-prototype-of.js");
var _child_process = require("child_process");
var _fs = require("fs");
var _os = require("os");
var path = _interopRequireWildcard(require("path"));
var _events = _interopRequireDefault(require("events"));
var _types = require("./types");
var _project_workspace = _interopRequireDefault(require("./project_workspace"));
var _Process = require("./Process");
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }
function _getRequireWildcardCache(e) { if ("function" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }
function _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || "object" != _typeof(e) && "function" != typeof e) return { "default": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if ("default" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n["default"] = e, t && t.set(e, n), n; }
function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }
function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _iterableToArray(iter) { if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter); }
function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return _typeof(key) === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (_typeof(input) !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (_typeof(res) !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }
function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, "prototype", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }
function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }
function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }
function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } else if (call !== void 0) { throw new TypeError("Derived constructors may only return object or undefined"); } return _assertThisInitialized(self); }
function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }
function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }
function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); } /**
                                                                                                                                                                                                                      * Copyright (c) 2014-present, Facebook, Inc. All rights reserved.
                                                                                                                                                                                                                      *
                                                                                                                                                                                                                      * This source code is licensed under the MIT license found in the
                                                                                                                                                                                                                      * LICENSE file in the root directory of this source tree.
                                                                                                                                                                                                                      *
                                                                                                                                                                                                                      * 
                                                                                                                                                                                                                      */
// This class represents the running process, and
// passes out events when it understands what data is being
// pass sent out of the process
var Runner = exports["default"] = /*#__PURE__*/function (_EventEmitter) {
  _inherits(Runner, _EventEmitter);
  var _super = _createSuper(Runner);
  // $FlowIgnore[value-as-type]

  // $FlowIgnore[value-as-type]

  // $FlowIgnore[value-as-type]
  function Runner(workspace, options) {
    var _this;
    _classCallCheck(this, Runner);
    _this = _super.call(this);
    _this._createProcess = options && options.createProcess || _Process.createProcess;
    _this.options = options || {};
    _this.workspace = workspace;
    _this.outputPath = path.join((0, _os.tmpdir)(), "jest_runner_".concat(_this.workspace.outputFileSuffix || '', ".json"));
    _this.prevMessageTypes = [];
    _this._exited = false;
    return _this;
  }
  _createClass(Runner, [{
    key: "__convertDashedArgs",
    value: function __convertDashedArgs(args) {
      if (!this.workspace.useDashedArgs) {
        return args;
      }
      return args.map(function (arg) {
        return arg && arg.startsWith('--') && arg.length > 2 ? arg.replace(/(\B)([A-Z])/gm, '-$2').toLowerCase() : arg;
      });
    }
  }, {
    key: "_getArgs",
    value: function _getArgs() {
      if (this.options.args && this.options.args.replace) {
        return this.options.args.skipConversion ? this.options.args.args : this.__convertDashedArgs(this.options.args.args);
      }

      // Handle the arg change on v18
      var belowEighteen = this.workspace.localJestMajorVersion < 18;
      var outputArg = belowEighteen ? '--jsonOutputFile' : '--outputFile';
      var args = ['--testLocationInResults', '--json', '--useStderr', outputArg, this.outputPath];
      if (this.watchMode) {
        args.push(this.watchAll ? '--watchAll' : '--watch');
      }
      if (this.options.testNamePattern) {
        args.push('--testNamePattern', this.options.testNamePattern);
      }
      if (this.options.testFileNamePattern) {
        args.push(this.options.testFileNamePattern);
      }
      if (this.workspace.collectCoverage === true) {
        args.push('--coverage');
      }
      if (this.workspace.collectCoverage === false) {
        args.push('--no-coverage');
      }
      if (this.options.noColor === true) {
        args.push('--no-color');
      }
      if (this.options.reporters) {
        this.options.reporters.forEach(function (reporter) {
          args.push('--reporters', reporter);
        });
      }
      if (this.options.args) {
        var _args;
        (_args = args).push.apply(_args, _toConsumableArray(this.options.args.args));
      }
      args = this.__convertDashedArgs(args);
      return args;
    }
  }, {
    key: "start",
    value: function start() {
      var _this2 = this;
      var watchMode = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;
      var watchAll = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
      if (this.debugprocess) {
        return;
      }
      this.watchMode = watchMode;
      this.watchAll = watchAll;
      var args = this._getArgs();
      var debugprocess = this._createProcess(this.workspace, args);
      this.debugprocess = debugprocess;
      debugprocess.stdout.on('data', function (data) {
        _this2._parseOutput(data, false);
      });
      debugprocess.stderr.on('data', function (data) {
        // jest 23 could send test results message to stderr
        // see https://github.com/facebook/jest/pull/4858
        _this2._parseOutput(data, true);
      });
      debugprocess.on('exit', function (code, signal) {
        _this2._exited = true;

        // this is mainly for backward compatibility, should be deprecated soon
        _this2.emit('debuggerProcessExit');
        _this2.emit('processExit', code, signal);
        _this2.prevMessageTypes.length = 0;
      });
      debugprocess.on('error', function (error) {
        _this2.emit('terminalError', "Process failed: ".concat(error.message));
        _this2.prevMessageTypes.length = 0;
      });
      debugprocess.on('close', function (code, signal) {
        // this is mainly for backward compatibility, should be deprecated soon
        _this2.emit('debuggerProcessExit');
        _this2.emit('processClose', code, signal);
        _this2.prevMessageTypes.length = 0;
      });
    }

    /**
     * parse the stdin/out stream buffer for recognized messages.
     *
     * note: if these messages coming in in separate chucks, we might not be able to
     * resolve it properly. While there haven't been much evidence of such scenario,
     * it's worth to note that it could and we might need to buffer them in that case.
     * see https://github.com/jest-community/jest-editor-support/pull/9#pullrequestreview-231888752
     *
     * @param {Buffer} data
     * @param {boolean} isStdErr
     * @returns {MessageType}
     * @memberof Runner
     */
  }, {
    key: "_parseOutput",
    value: function _parseOutput(data, isStdErr) {
      var _this3 = this;
      var msgType = this.findMessageType(data);
      switch (msgType) {
        case _types.messageTypes.testResults:
          this.emit('executableStdErr', data, {
            type: msgType
          });
          (0, _fs.readFile)(this.outputPath, 'utf8', function (err, _data) {
            if (err) {
              var message = "JSON report not found at ".concat(_this3.outputPath);
              _this3.emit('terminalError', message);
            } else {
              var noTestsFound = _this3.doResultsFollowNoTestsFoundMessage();
              _this3.emit('executableJSON', JSON.parse(_data), {
                noTestsFound: noTestsFound
              });
            }
          });
          this.prevMessageTypes.length = 0;
          break;
        case _types.messageTypes.watchUsage:
        case _types.messageTypes.noTests:
          this.prevMessageTypes.push(msgType);
          this.emit('executableStdErr', data, {
            type: msgType
          });
          break;
        default:
          // no special action needed, just report the output by its source
          if (isStdErr) {
            this.emit('executableStdErr', data, {
              type: msgType
            });
          } else {
            // remove clear screen escape sequence
            this.emit('executableOutput', data.toString().replace('[2J[H', ''));
          }
          this.prevMessageTypes.length = 0;
          break;
      }
      return msgType;
    }
  }, {
    key: "runJestWithUpdateForSnapshots",
    value: function runJestWithUpdateForSnapshots(completion, args) {
      var defaultArgs = ['--updateSnapshot'];
      var updateProcess = this._createProcess(this.workspace, [].concat(defaultArgs, _toConsumableArray(args || [])));
      updateProcess.on('close', function () {
        completion();
      });
    }
  }, {
    key: "closeProcess",
    value: function closeProcess() {
      if (!this.debugprocess || this._exited) {
        // eslint-disable-next-line no-console
        console.log("process has not started or already exited");
        return;
      }
      if (process.platform === 'win32') {
        // Windows doesn't exit the process when it should.
        (0, _child_process.spawn)('taskkill', ['/pid', "".concat(this.debugprocess.pid), '/T', '/F']);
      } else {
        try {
          // kill all process with the same PGID, i.e.
          // as a detached process, it is the same as the PID of the leader process.
          process.kill(-this.debugprocess.pid);
        } catch (e) {
          var _this$debugprocess, _this$debugprocess2;
          // if anything goes wrong, fallback to the old benavior
          // knowing this could leave orphan process...
          // eslint-disable-next-line no-console
          console.warn("failed to kill process group, this could leave some orphan process whose ppid=".concat(((_this$debugprocess = this.debugprocess) === null || _this$debugprocess === void 0 ? void 0 : _this$debugprocess.pid) || 'process-non-exist', ". error="), e);
          (_this$debugprocess2 = this.debugprocess) === null || _this$debugprocess2 === void 0 || _this$debugprocess2.kill();
        }
      }
      this.debugprocess = undefined;
    }

    // eslint-disable-next-line class-methods-use-this
  }, {
    key: "findMessageType",
    value: function findMessageType(buf) {
      var noTestRegex = /No tests found related to files changed since ((last commit)|("[a-z0-9]+"))./;
      var watchUsageRegex = /^\s*Watch Usage\b/;
      var testResultsRegex = /Test results written to/;
      var checks = [{
        regex: testResultsRegex,
        messageType: _types.messageTypes.testResults
      }, {
        regex: noTestRegex,
        messageType: _types.messageTypes.noTests
      }, {
        regex: watchUsageRegex,
        messageType: _types.messageTypes.watchUsage
      }];
      var str = buf.toString('utf8');
      var match = checks.find(function (_ref) {
        var regex = _ref.regex;
        return regex.test(str);
      });
      return match ? match.messageType : _types.messageTypes.unknown;
    }
  }, {
    key: "doResultsFollowNoTestsFoundMessage",
    value: function doResultsFollowNoTestsFoundMessage() {
      if (this.prevMessageTypes.length === 1) {
        return this.prevMessageTypes[0] === _types.messageTypes.noTests;
      }
      if (this.prevMessageTypes.length === 2) {
        return this.prevMessageTypes[0] === _types.messageTypes.noTests && this.prevMessageTypes[1] === _types.messageTypes.watchUsage;
      }
      return false;
    }
  }]);
  return Runner;
}(_events["default"]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfY2hpbGRfcHJvY2VzcyIsInJlcXVpcmUiLCJfZnMiLCJfb3MiLCJwYXRoIiwiX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQiLCJfZXZlbnRzIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIl90eXBlcyIsIl9wcm9qZWN0X3dvcmtzcGFjZSIsIl9Qcm9jZXNzIiwib2JqIiwiX19lc01vZHVsZSIsIl9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSIsImUiLCJXZWFrTWFwIiwiciIsInQiLCJfdHlwZW9mIiwiaGFzIiwiZ2V0IiwibiIsIl9fcHJvdG9fXyIsImEiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsInUiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJpIiwic2V0IiwiX3RvQ29uc3VtYWJsZUFycmF5IiwiYXJyIiwiX2FycmF5V2l0aG91dEhvbGVzIiwiX2l0ZXJhYmxlVG9BcnJheSIsIl91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheSIsIl9ub25JdGVyYWJsZVNwcmVhZCIsIlR5cGVFcnJvciIsIm8iLCJtaW5MZW4iLCJfYXJyYXlMaWtlVG9BcnJheSIsInRvU3RyaW5nIiwic2xpY2UiLCJjb25zdHJ1Y3RvciIsIm5hbWUiLCJBcnJheSIsImZyb20iLCJ0ZXN0IiwiaXRlciIsIlN5bWJvbCIsIml0ZXJhdG9yIiwiaXNBcnJheSIsImxlbiIsImxlbmd0aCIsImFycjIiLCJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiX2RlZmluZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJwcm9wcyIsImRlc2NyaXB0b3IiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJfdG9Qcm9wZXJ0eUtleSIsImtleSIsIl9jcmVhdGVDbGFzcyIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsImFyZyIsIl90b1ByaW1pdGl2ZSIsIlN0cmluZyIsImlucHV0IiwiaGludCIsInByaW0iLCJ0b1ByaW1pdGl2ZSIsInVuZGVmaW5lZCIsInJlcyIsIk51bWJlciIsIl9pbmhlcml0cyIsInN1YkNsYXNzIiwic3VwZXJDbGFzcyIsImNyZWF0ZSIsInZhbHVlIiwiX3NldFByb3RvdHlwZU9mIiwicCIsInNldFByb3RvdHlwZU9mIiwiYmluZCIsIl9jcmVhdGVTdXBlciIsIkRlcml2ZWQiLCJoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0IiwiX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCIsIl9jcmVhdGVTdXBlckludGVybmFsIiwiU3VwZXIiLCJfZ2V0UHJvdG90eXBlT2YiLCJyZXN1bHQiLCJOZXdUYXJnZXQiLCJSZWZsZWN0IiwiY29uc3RydWN0IiwiYXJndW1lbnRzIiwiYXBwbHkiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIsInNlbGYiLCJfYXNzZXJ0VGhpc0luaXRpYWxpemVkIiwiUmVmZXJlbmNlRXJyb3IiLCJzaGFtIiwiUHJveHkiLCJCb29sZWFuIiwidmFsdWVPZiIsImdldFByb3RvdHlwZU9mIiwiUnVubmVyIiwiZXhwb3J0cyIsIl9FdmVudEVtaXR0ZXIiLCJfc3VwZXIiLCJ3b3Jrc3BhY2UiLCJvcHRpb25zIiwiX3RoaXMiLCJfY3JlYXRlUHJvY2VzcyIsImNyZWF0ZVByb2Nlc3MiLCJvdXRwdXRQYXRoIiwiam9pbiIsInRtcGRpciIsImNvbmNhdCIsIm91dHB1dEZpbGVTdWZmaXgiLCJwcmV2TWVzc2FnZVR5cGVzIiwiX2V4aXRlZCIsIl9fY29udmVydERhc2hlZEFyZ3MiLCJhcmdzIiwidXNlRGFzaGVkQXJncyIsIm1hcCIsInN0YXJ0c1dpdGgiLCJyZXBsYWNlIiwidG9Mb3dlckNhc2UiLCJfZ2V0QXJncyIsInNraXBDb252ZXJzaW9uIiwiYmVsb3dFaWdodGVlbiIsImxvY2FsSmVzdE1ham9yVmVyc2lvbiIsIm91dHB1dEFyZyIsIndhdGNoTW9kZSIsInB1c2giLCJ3YXRjaEFsbCIsInRlc3ROYW1lUGF0dGVybiIsInRlc3RGaWxlTmFtZVBhdHRlcm4iLCJjb2xsZWN0Q292ZXJhZ2UiLCJub0NvbG9yIiwicmVwb3J0ZXJzIiwiZm9yRWFjaCIsInJlcG9ydGVyIiwiX2FyZ3MiLCJzdGFydCIsIl90aGlzMiIsImRlYnVncHJvY2VzcyIsInN0ZG91dCIsIm9uIiwiZGF0YSIsIl9wYXJzZU91dHB1dCIsInN0ZGVyciIsImNvZGUiLCJzaWduYWwiLCJlbWl0IiwiZXJyb3IiLCJtZXNzYWdlIiwiaXNTdGRFcnIiLCJfdGhpczMiLCJtc2dUeXBlIiwiZmluZE1lc3NhZ2VUeXBlIiwibWVzc2FnZVR5cGVzIiwidGVzdFJlc3VsdHMiLCJ0eXBlIiwicmVhZEZpbGUiLCJlcnIiLCJfZGF0YSIsIm5vVGVzdHNGb3VuZCIsImRvUmVzdWx0c0ZvbGxvd05vVGVzdHNGb3VuZE1lc3NhZ2UiLCJKU09OIiwicGFyc2UiLCJ3YXRjaFVzYWdlIiwibm9UZXN0cyIsInJ1bkplc3RXaXRoVXBkYXRlRm9yU25hcHNob3RzIiwiY29tcGxldGlvbiIsImRlZmF1bHRBcmdzIiwidXBkYXRlUHJvY2VzcyIsImNsb3NlUHJvY2VzcyIsImNvbnNvbGUiLCJsb2ciLCJwcm9jZXNzIiwicGxhdGZvcm0iLCJzcGF3biIsInBpZCIsImtpbGwiLCJfdGhpcyRkZWJ1Z3Byb2Nlc3MiLCJfdGhpcyRkZWJ1Z3Byb2Nlc3MyIiwid2FybiIsImJ1ZiIsIm5vVGVzdFJlZ2V4Iiwid2F0Y2hVc2FnZVJlZ2V4IiwidGVzdFJlc3VsdHNSZWdleCIsImNoZWNrcyIsInJlZ2V4IiwibWVzc2FnZVR5cGUiLCJzdHIiLCJtYXRjaCIsImZpbmQiLCJfcmVmIiwidW5rbm93biIsIkV2ZW50RW1pdHRlciJdLCJzb3VyY2VzIjpbIi4uL3NyYy9SdW5uZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTQtcHJlc2VudCwgRmFjZWJvb2ssIEluYy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKiBAZmxvd1xuICovXG5cbmltcG9ydCB7Q2hpbGRQcm9jZXNzLCBzcGF3bn0gZnJvbSAnY2hpbGRfcHJvY2Vzcyc7XG5pbXBvcnQge3JlYWRGaWxlfSBmcm9tICdmcyc7XG5pbXBvcnQge3RtcGRpcn0gZnJvbSAnb3MnO1xuaW1wb3J0ICogYXMgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCBFdmVudEVtaXR0ZXIgZnJvbSAnZXZlbnRzJztcbmltcG9ydCB7bWVzc2FnZVR5cGVzfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB0eXBlIHtPcHRpb25zLCBNZXNzYWdlVHlwZX0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgUHJvamVjdFdvcmtzcGFjZSBmcm9tICcuL3Byb2plY3Rfd29ya3NwYWNlJztcbmltcG9ydCB7Y3JlYXRlUHJvY2Vzc30gZnJvbSAnLi9Qcm9jZXNzJztcblxuLy8gVGhpcyBjbGFzcyByZXByZXNlbnRzIHRoZSBydW5uaW5nIHByb2Nlc3MsIGFuZFxuLy8gcGFzc2VzIG91dCBldmVudHMgd2hlbiBpdCB1bmRlcnN0YW5kcyB3aGF0IGRhdGEgaXMgYmVpbmdcbi8vIHBhc3Mgc2VudCBvdXQgb2YgdGhlIHByb2Nlc3NcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJ1bm5lciBleHRlbmRzIEV2ZW50RW1pdHRlciB7XG4gIGRlYnVncHJvY2VzczogP0NoaWxkUHJvY2VzcztcblxuICBvdXRwdXRQYXRoOiBzdHJpbmc7XG5cbiAgLy8gJEZsb3dJZ25vcmVbdmFsdWUtYXMtdHlwZV1cbiAgd29ya3NwYWNlOiBQcm9qZWN0V29ya3NwYWNlO1xuXG4gIC8vICRGbG93SWdub3JlW3ZhbHVlLWFzLXR5cGVdXG4gIF9jcmVhdGVQcm9jZXNzOiAod29ya3NwYWNlOiBQcm9qZWN0V29ya3NwYWNlLCBhcmdzOiBBcnJheTxzdHJpbmc+KSA9PiBDaGlsZFByb2Nlc3M7XG5cbiAgd2F0Y2hNb2RlOiBib29sZWFuO1xuXG4gIHdhdGNoQWxsOiBib29sZWFuO1xuXG4gIG9wdGlvbnM6IE9wdGlvbnM7XG5cbiAgcHJldk1lc3NhZ2VUeXBlczogTWVzc2FnZVR5cGVbXTtcblxuICBfZXhpdGVkOiBib29sZWFuO1xuXG4gIC8vICRGbG93SWdub3JlW3ZhbHVlLWFzLXR5cGVdXG4gIGNvbnN0cnVjdG9yKHdvcmtzcGFjZTogUHJvamVjdFdvcmtzcGFjZSwgb3B0aW9ucz86IE9wdGlvbnMpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgdGhpcy5fY3JlYXRlUHJvY2VzcyA9IChvcHRpb25zICYmIG9wdGlvbnMuY3JlYXRlUHJvY2VzcykgfHwgY3JlYXRlUHJvY2VzcztcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgIHRoaXMud29ya3NwYWNlID0gd29ya3NwYWNlO1xuICAgIHRoaXMub3V0cHV0UGF0aCA9IHBhdGguam9pbih0bXBkaXIoKSwgYGplc3RfcnVubmVyXyR7dGhpcy53b3Jrc3BhY2Uub3V0cHV0RmlsZVN1ZmZpeCB8fCAnJ30uanNvbmApO1xuICAgIHRoaXMucHJldk1lc3NhZ2VUeXBlcyA9IFtdO1xuICAgIHRoaXMuX2V4aXRlZCA9IGZhbHNlO1xuICB9XG5cbiAgX19jb252ZXJ0RGFzaGVkQXJncyhhcmdzOiBzdHJpbmdbXSk6IHN0cmluZ1tdIHtcbiAgICBpZiAoIXRoaXMud29ya3NwYWNlLnVzZURhc2hlZEFyZ3MpIHtcbiAgICAgIHJldHVybiBhcmdzO1xuICAgIH1cblxuICAgIHJldHVybiBhcmdzLm1hcCgoYXJnKSA9PlxuICAgICAgYXJnICYmIGFyZy5zdGFydHNXaXRoKCctLScpICYmIGFyZy5sZW5ndGggPiAyID8gYXJnLnJlcGxhY2UoLyhcXEIpKFtBLVpdKS9nbSwgJy0kMicpLnRvTG93ZXJDYXNlKCkgOiBhcmdcbiAgICApO1xuICB9XG5cbiAgX2dldEFyZ3MoKTogc3RyaW5nW10ge1xuICAgIGlmICh0aGlzLm9wdGlvbnMuYXJncyAmJiB0aGlzLm9wdGlvbnMuYXJncy5yZXBsYWNlKSB7XG4gICAgICByZXR1cm4gdGhpcy5vcHRpb25zLmFyZ3Muc2tpcENvbnZlcnNpb25cbiAgICAgICAgPyB0aGlzLm9wdGlvbnMuYXJncy5hcmdzXG4gICAgICAgIDogdGhpcy5fX2NvbnZlcnREYXNoZWRBcmdzKHRoaXMub3B0aW9ucy5hcmdzLmFyZ3MpO1xuICAgIH1cblxuICAgIC8vIEhhbmRsZSB0aGUgYXJnIGNoYW5nZSBvbiB2MThcbiAgICBjb25zdCBiZWxvd0VpZ2h0ZWVuID0gdGhpcy53b3Jrc3BhY2UubG9jYWxKZXN0TWFqb3JWZXJzaW9uIDwgMTg7XG4gICAgY29uc3Qgb3V0cHV0QXJnID0gYmVsb3dFaWdodGVlbiA/ICctLWpzb25PdXRwdXRGaWxlJyA6ICctLW91dHB1dEZpbGUnO1xuICAgIGxldCBhcmdzID0gWyctLXRlc3RMb2NhdGlvbkluUmVzdWx0cycsICctLWpzb24nLCAnLS11c2VTdGRlcnInLCBvdXRwdXRBcmcsIHRoaXMub3V0cHV0UGF0aF07XG4gICAgaWYgKHRoaXMud2F0Y2hNb2RlKSB7XG4gICAgICBhcmdzLnB1c2godGhpcy53YXRjaEFsbCA/ICctLXdhdGNoQWxsJyA6ICctLXdhdGNoJyk7XG4gICAgfVxuICAgIGlmICh0aGlzLm9wdGlvbnMudGVzdE5hbWVQYXR0ZXJuKSB7XG4gICAgICBhcmdzLnB1c2goJy0tdGVzdE5hbWVQYXR0ZXJuJywgdGhpcy5vcHRpb25zLnRlc3ROYW1lUGF0dGVybik7XG4gICAgfVxuICAgIGlmICh0aGlzLm9wdGlvbnMudGVzdEZpbGVOYW1lUGF0dGVybikge1xuICAgICAgYXJncy5wdXNoKHRoaXMub3B0aW9ucy50ZXN0RmlsZU5hbWVQYXR0ZXJuKTtcbiAgICB9XG4gICAgaWYgKHRoaXMud29ya3NwYWNlLmNvbGxlY3RDb3ZlcmFnZSA9PT0gdHJ1ZSkge1xuICAgICAgYXJncy5wdXNoKCctLWNvdmVyYWdlJyk7XG4gICAgfVxuICAgIGlmICh0aGlzLndvcmtzcGFjZS5jb2xsZWN0Q292ZXJhZ2UgPT09IGZhbHNlKSB7XG4gICAgICBhcmdzLnB1c2goJy0tbm8tY292ZXJhZ2UnKTtcbiAgICB9XG4gICAgaWYgKHRoaXMub3B0aW9ucy5ub0NvbG9yID09PSB0cnVlKSB7XG4gICAgICBhcmdzLnB1c2goJy0tbm8tY29sb3InKTtcbiAgICB9XG4gICAgaWYgKHRoaXMub3B0aW9ucy5yZXBvcnRlcnMpIHtcbiAgICAgIHRoaXMub3B0aW9ucy5yZXBvcnRlcnMuZm9yRWFjaCgocmVwb3J0ZXIpID0+IHtcbiAgICAgICAgYXJncy5wdXNoKCctLXJlcG9ydGVycycsIHJlcG9ydGVyKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAodGhpcy5vcHRpb25zLmFyZ3MpIHtcbiAgICAgIGFyZ3MucHVzaCguLi50aGlzLm9wdGlvbnMuYXJncy5hcmdzKTtcbiAgICB9XG4gICAgYXJncyA9IHRoaXMuX19jb252ZXJ0RGFzaGVkQXJncyhhcmdzKTtcblxuICAgIHJldHVybiBhcmdzO1xuICB9XG5cbiAgc3RhcnQod2F0Y2hNb2RlOiBib29sZWFuID0gdHJ1ZSwgd2F0Y2hBbGw6IGJvb2xlYW4gPSBmYWxzZSkge1xuICAgIGlmICh0aGlzLmRlYnVncHJvY2Vzcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMud2F0Y2hNb2RlID0gd2F0Y2hNb2RlO1xuICAgIHRoaXMud2F0Y2hBbGwgPSB3YXRjaEFsbDtcblxuICAgIGNvbnN0IGFyZ3MgPSB0aGlzLl9nZXRBcmdzKCk7XG4gICAgY29uc3QgZGVidWdwcm9jZXNzID0gdGhpcy5fY3JlYXRlUHJvY2Vzcyh0aGlzLndvcmtzcGFjZSwgYXJncyk7XG4gICAgdGhpcy5kZWJ1Z3Byb2Nlc3MgPSBkZWJ1Z3Byb2Nlc3M7XG4gICAgZGVidWdwcm9jZXNzLnN0ZG91dC5vbignZGF0YScsIChkYXRhOiBCdWZmZXIpID0+IHtcbiAgICAgIHRoaXMuX3BhcnNlT3V0cHV0KGRhdGEsIGZhbHNlKTtcbiAgICB9KTtcblxuICAgIGRlYnVncHJvY2Vzcy5zdGRlcnIub24oJ2RhdGEnLCAoZGF0YTogQnVmZmVyKSA9PiB7XG4gICAgICAvLyBqZXN0IDIzIGNvdWxkIHNlbmQgdGVzdCByZXN1bHRzIG1lc3NhZ2UgdG8gc3RkZXJyXG4gICAgICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL2plc3QvcHVsbC80ODU4XG4gICAgICB0aGlzLl9wYXJzZU91dHB1dChkYXRhLCB0cnVlKTtcbiAgICB9KTtcbiAgICBkZWJ1Z3Byb2Nlc3Mub24oJ2V4aXQnLCAoY29kZTogbnVtYmVyIHwgbnVsbCwgc2lnbmFsOiBzdHJpbmcgfCBudWxsKSA9PiB7XG4gICAgICB0aGlzLl9leGl0ZWQgPSB0cnVlO1xuXG4gICAgICAvLyB0aGlzIGlzIG1haW5seSBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eSwgc2hvdWxkIGJlIGRlcHJlY2F0ZWQgc29vblxuICAgICAgdGhpcy5lbWl0KCdkZWJ1Z2dlclByb2Nlc3NFeGl0Jyk7XG5cbiAgICAgIHRoaXMuZW1pdCgncHJvY2Vzc0V4aXQnLCBjb2RlLCBzaWduYWwpO1xuICAgICAgdGhpcy5wcmV2TWVzc2FnZVR5cGVzLmxlbmd0aCA9IDA7XG4gICAgfSk7XG5cbiAgICBkZWJ1Z3Byb2Nlc3Mub24oJ2Vycm9yJywgKGVycm9yOiBFcnJvcikgPT4ge1xuICAgICAgdGhpcy5lbWl0KCd0ZXJtaW5hbEVycm9yJywgYFByb2Nlc3MgZmFpbGVkOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICB0aGlzLnByZXZNZXNzYWdlVHlwZXMubGVuZ3RoID0gMDtcbiAgICB9KTtcblxuICAgIGRlYnVncHJvY2Vzcy5vbignY2xvc2UnLCAoY29kZTogbnVtYmVyIHwgbnVsbCwgc2lnbmFsOiBzdHJpbmcgfCBudWxsKSA9PiB7XG4gICAgICAvLyB0aGlzIGlzIG1haW5seSBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eSwgc2hvdWxkIGJlIGRlcHJlY2F0ZWQgc29vblxuICAgICAgdGhpcy5lbWl0KCdkZWJ1Z2dlclByb2Nlc3NFeGl0Jyk7XG5cbiAgICAgIHRoaXMuZW1pdCgncHJvY2Vzc0Nsb3NlJywgY29kZSwgc2lnbmFsKTtcbiAgICAgIHRoaXMucHJldk1lc3NhZ2VUeXBlcy5sZW5ndGggPSAwO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIHBhcnNlIHRoZSBzdGRpbi9vdXQgc3RyZWFtIGJ1ZmZlciBmb3IgcmVjb2duaXplZCBtZXNzYWdlcy5cbiAgICpcbiAgICogbm90ZTogaWYgdGhlc2UgbWVzc2FnZXMgY29taW5nIGluIGluIHNlcGFyYXRlIGNodWNrcywgd2UgbWlnaHQgbm90IGJlIGFibGUgdG9cbiAgICogcmVzb2x2ZSBpdCBwcm9wZXJseS4gV2hpbGUgdGhlcmUgaGF2ZW4ndCBiZWVuIG11Y2ggZXZpZGVuY2Ugb2Ygc3VjaCBzY2VuYXJpbyxcbiAgICogaXQncyB3b3J0aCB0byBub3RlIHRoYXQgaXQgY291bGQgYW5kIHdlIG1pZ2h0IG5lZWQgdG8gYnVmZmVyIHRoZW0gaW4gdGhhdCBjYXNlLlxuICAgKiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2plc3QtY29tbXVuaXR5L2plc3QtZWRpdG9yLXN1cHBvcnQvcHVsbC85I3B1bGxyZXF1ZXN0cmV2aWV3LTIzMTg4ODc1MlxuICAgKlxuICAgKiBAcGFyYW0ge0J1ZmZlcn0gZGF0YVxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGlzU3RkRXJyXG4gICAqIEByZXR1cm5zIHtNZXNzYWdlVHlwZX1cbiAgICogQG1lbWJlcm9mIFJ1bm5lclxuICAgKi9cbiAgX3BhcnNlT3V0cHV0KGRhdGE6IEJ1ZmZlciwgaXNTdGRFcnI6IGJvb2xlYW4pOiBNZXNzYWdlVHlwZSB7XG4gICAgY29uc3QgbXNnVHlwZSA9IHRoaXMuZmluZE1lc3NhZ2VUeXBlKGRhdGEpO1xuICAgIHN3aXRjaCAobXNnVHlwZSkge1xuICAgICAgY2FzZSBtZXNzYWdlVHlwZXMudGVzdFJlc3VsdHM6XG4gICAgICAgIHRoaXMuZW1pdCgnZXhlY3V0YWJsZVN0ZEVycicsIGRhdGEsIHtcbiAgICAgICAgICB0eXBlOiBtc2dUeXBlLFxuICAgICAgICB9KTtcbiAgICAgICAgcmVhZEZpbGUodGhpcy5vdXRwdXRQYXRoLCAndXRmOCcsIChlcnIsIF9kYXRhKSA9PiB7XG4gICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGBKU09OIHJlcG9ydCBub3QgZm91bmQgYXQgJHt0aGlzLm91dHB1dFBhdGh9YDtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgndGVybWluYWxFcnJvcicsIG1lc3NhZ2UpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBub1Rlc3RzRm91bmQgPSB0aGlzLmRvUmVzdWx0c0ZvbGxvd05vVGVzdHNGb3VuZE1lc3NhZ2UoKTtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnZXhlY3V0YWJsZUpTT04nLCBKU09OLnBhcnNlKF9kYXRhKSwge1xuICAgICAgICAgICAgICBub1Rlc3RzRm91bmQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnByZXZNZXNzYWdlVHlwZXMubGVuZ3RoID0gMDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIG1lc3NhZ2VUeXBlcy53YXRjaFVzYWdlOlxuICAgICAgY2FzZSBtZXNzYWdlVHlwZXMubm9UZXN0czpcbiAgICAgICAgdGhpcy5wcmV2TWVzc2FnZVR5cGVzLnB1c2gobXNnVHlwZSk7XG4gICAgICAgIHRoaXMuZW1pdCgnZXhlY3V0YWJsZVN0ZEVycicsIGRhdGEsIHtcbiAgICAgICAgICB0eXBlOiBtc2dUeXBlLFxuICAgICAgICB9KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICAvLyBubyBzcGVjaWFsIGFjdGlvbiBuZWVkZWQsIGp1c3QgcmVwb3J0IHRoZSBvdXRwdXQgYnkgaXRzIHNvdXJjZVxuICAgICAgICBpZiAoaXNTdGRFcnIpIHtcbiAgICAgICAgICB0aGlzLmVtaXQoJ2V4ZWN1dGFibGVTdGRFcnInLCBkYXRhLCB7XG4gICAgICAgICAgICB0eXBlOiBtc2dUeXBlLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIHJlbW92ZSBjbGVhciBzY3JlZW4gZXNjYXBlIHNlcXVlbmNlXG4gICAgICAgICAgdGhpcy5lbWl0KCdleGVjdXRhYmxlT3V0cHV0JywgZGF0YS50b1N0cmluZygpLnJlcGxhY2UoJ1x1MDAxYlsySlx1MDAxYltIJywgJycpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByZXZNZXNzYWdlVHlwZXMubGVuZ3RoID0gMDtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1zZ1R5cGU7XG4gIH1cblxuICBydW5KZXN0V2l0aFVwZGF0ZUZvclNuYXBzaG90cyhjb21wbGV0aW9uOiAoKSA9PiB2b2lkLCBhcmdzPzogc3RyaW5nW10pIHtcbiAgICBjb25zdCBkZWZhdWx0QXJncyA9IFsnLS11cGRhdGVTbmFwc2hvdCddO1xuXG4gICAgY29uc3QgdXBkYXRlUHJvY2VzcyA9IHRoaXMuX2NyZWF0ZVByb2Nlc3ModGhpcy53b3Jrc3BhY2UsIFsuLi5kZWZhdWx0QXJncywgLi4uKGFyZ3MgfHwgW10pXSk7XG4gICAgdXBkYXRlUHJvY2Vzcy5vbignY2xvc2UnLCAoKSA9PiB7XG4gICAgICBjb21wbGV0aW9uKCk7XG4gICAgfSk7XG4gIH1cblxuICBjbG9zZVByb2Nlc3MoKSB7XG4gICAgaWYgKCF0aGlzLmRlYnVncHJvY2VzcyB8fCB0aGlzLl9leGl0ZWQpIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICBjb25zb2xlLmxvZyhgcHJvY2VzcyBoYXMgbm90IHN0YXJ0ZWQgb3IgYWxyZWFkeSBleGl0ZWRgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHByb2Nlc3MucGxhdGZvcm0gPT09ICd3aW4zMicpIHtcbiAgICAgIC8vIFdpbmRvd3MgZG9lc24ndCBleGl0IHRoZSBwcm9jZXNzIHdoZW4gaXQgc2hvdWxkLlxuICAgICAgc3Bhd24oJ3Rhc2traWxsJywgWycvcGlkJywgYCR7dGhpcy5kZWJ1Z3Byb2Nlc3MucGlkfWAsICcvVCcsICcvRiddKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8ga2lsbCBhbGwgcHJvY2VzcyB3aXRoIHRoZSBzYW1lIFBHSUQsIGkuZS5cbiAgICAgICAgLy8gYXMgYSBkZXRhY2hlZCBwcm9jZXNzLCBpdCBpcyB0aGUgc2FtZSBhcyB0aGUgUElEIG9mIHRoZSBsZWFkZXIgcHJvY2Vzcy5cbiAgICAgICAgcHJvY2Vzcy5raWxsKC10aGlzLmRlYnVncHJvY2Vzcy5waWQpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBpZiBhbnl0aGluZyBnb2VzIHdyb25nLCBmYWxsYmFjayB0byB0aGUgb2xkIGJlbmF2aW9yXG4gICAgICAgIC8vIGtub3dpbmcgdGhpcyBjb3VsZCBsZWF2ZSBvcnBoYW4gcHJvY2Vzcy4uLlxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgYGZhaWxlZCB0byBraWxsIHByb2Nlc3MgZ3JvdXAsIHRoaXMgY291bGQgbGVhdmUgc29tZSBvcnBoYW4gcHJvY2VzcyB3aG9zZSBwcGlkPSR7XG4gICAgICAgICAgICB0aGlzLmRlYnVncHJvY2Vzcz8ucGlkIHx8ICdwcm9jZXNzLW5vbi1leGlzdCdcbiAgICAgICAgICB9LiBlcnJvcj1gLFxuICAgICAgICAgIGVcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5kZWJ1Z3Byb2Nlc3M/LmtpbGwoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5kZWJ1Z3Byb2Nlc3MgPSB1bmRlZmluZWQ7XG4gIH1cblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY2xhc3MtbWV0aG9kcy11c2UtdGhpc1xuICBmaW5kTWVzc2FnZVR5cGUoYnVmOiBCdWZmZXIpOiBNZXNzYWdlVHlwZSB7XG4gICAgY29uc3Qgbm9UZXN0UmVnZXggPSAvTm8gdGVzdHMgZm91bmQgcmVsYXRlZCB0byBmaWxlcyBjaGFuZ2VkIHNpbmNlICgobGFzdCBjb21taXQpfChcIlthLXowLTldK1wiKSkuLztcbiAgICBjb25zdCB3YXRjaFVzYWdlUmVnZXggPSAvXlxccypXYXRjaCBVc2FnZVxcYi87XG4gICAgY29uc3QgdGVzdFJlc3VsdHNSZWdleCA9IC9UZXN0IHJlc3VsdHMgd3JpdHRlbiB0by87XG5cbiAgICBjb25zdCBjaGVja3MgPSBbXG4gICAgICB7cmVnZXg6IHRlc3RSZXN1bHRzUmVnZXgsIG1lc3NhZ2VUeXBlOiBtZXNzYWdlVHlwZXMudGVzdFJlc3VsdHN9LFxuICAgICAge3JlZ2V4OiBub1Rlc3RSZWdleCwgbWVzc2FnZVR5cGU6IG1lc3NhZ2VUeXBlcy5ub1Rlc3RzfSxcbiAgICAgIHtyZWdleDogd2F0Y2hVc2FnZVJlZ2V4LCBtZXNzYWdlVHlwZTogbWVzc2FnZVR5cGVzLndhdGNoVXNhZ2V9LFxuICAgIF07XG5cbiAgICBjb25zdCBzdHIgPSBidWYudG9TdHJpbmcoJ3V0ZjgnKTtcbiAgICBjb25zdCBtYXRjaCA9IGNoZWNrcy5maW5kKCh7cmVnZXh9KSA9PiByZWdleC50ZXN0KHN0cikpO1xuICAgIHJldHVybiBtYXRjaCA/IG1hdGNoLm1lc3NhZ2VUeXBlIDogbWVzc2FnZVR5cGVzLnVua25vd247XG4gIH1cblxuICBkb1Jlc3VsdHNGb2xsb3dOb1Rlc3RzRm91bmRNZXNzYWdlKCk6IGJvb2xlYW4ge1xuICAgIGlmICh0aGlzLnByZXZNZXNzYWdlVHlwZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICByZXR1cm4gdGhpcy5wcmV2TWVzc2FnZVR5cGVzWzBdID09PSBtZXNzYWdlVHlwZXMubm9UZXN0cztcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wcmV2TWVzc2FnZVR5cGVzLmxlbmd0aCA9PT0gMikge1xuICAgICAgcmV0dXJuIHRoaXMucHJldk1lc3NhZ2VUeXBlc1swXSA9PT0gbWVzc2FnZVR5cGVzLm5vVGVzdHMgJiYgdGhpcy5wcmV2TWVzc2FnZVR5cGVzWzFdID09PSBtZXNzYWdlVHlwZXMud2F0Y2hVc2FnZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFTQSxJQUFBQSxjQUFBLEdBQUFDLE9BQUE7QUFDQSxJQUFBQyxHQUFBLEdBQUFELE9BQUE7QUFDQSxJQUFBRSxHQUFBLEdBQUFGLE9BQUE7QUFDQSxJQUFBRyxJQUFBLEdBQUFDLHVCQUFBLENBQUFKLE9BQUE7QUFDQSxJQUFBSyxPQUFBLEdBQUFDLHNCQUFBLENBQUFOLE9BQUE7QUFDQSxJQUFBTyxNQUFBLEdBQUFQLE9BQUE7QUFFQSxJQUFBUSxrQkFBQSxHQUFBRixzQkFBQSxDQUFBTixPQUFBO0FBQ0EsSUFBQVMsUUFBQSxHQUFBVCxPQUFBO0FBQXdDLFNBQUFNLHVCQUFBSSxHQUFBLFdBQUFBLEdBQUEsSUFBQUEsR0FBQSxDQUFBQyxVQUFBLEdBQUFELEdBQUEsZ0JBQUFBLEdBQUE7QUFBQSxTQUFBRSx5QkFBQUMsQ0FBQSw2QkFBQUMsT0FBQSxtQkFBQUMsQ0FBQSxPQUFBRCxPQUFBLElBQUFFLENBQUEsT0FBQUYsT0FBQSxZQUFBRix3QkFBQSxZQUFBQSx5QkFBQUMsQ0FBQSxXQUFBQSxDQUFBLEdBQUFHLENBQUEsR0FBQUQsQ0FBQSxLQUFBRixDQUFBO0FBQUEsU0FBQVQsd0JBQUFTLENBQUEsRUFBQUUsQ0FBQSxTQUFBQSxDQUFBLElBQUFGLENBQUEsSUFBQUEsQ0FBQSxDQUFBRixVQUFBLFNBQUFFLENBQUEsZUFBQUEsQ0FBQSxnQkFBQUksT0FBQSxDQUFBSixDQUFBLDBCQUFBQSxDQUFBLHNCQUFBQSxDQUFBLFFBQUFHLENBQUEsR0FBQUosd0JBQUEsQ0FBQUcsQ0FBQSxPQUFBQyxDQUFBLElBQUFBLENBQUEsQ0FBQUUsR0FB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